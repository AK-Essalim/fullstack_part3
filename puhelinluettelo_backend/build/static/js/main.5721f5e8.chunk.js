(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),r=t.n(a),o=t(15),u=t.n(o),i=t(6),s=t(3),l=function(e){var n=e.persons,t=e.deletePerson;return Object(c.jsx)(c.Fragment,{children:n.map((function(e){return Object(c.jsxs)("p",{children:[e.name," ",e.number," ",Object(c.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},e.name)}))})},d=function(e){var n=e.handleNameChange,t=e.handleNumberChange,a=e.addName,r=e.newName,o=e.newNumber;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{onSubmit:a,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:r,onChange:n})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:o,onChange:t})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})})},b=function(e){var n=e.handleFilterValueChange,t=e.filterValue;return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{children:["filter shown with"," ",Object(c.jsx)("input",{value:t,onChange:n})]})})},h=t(4),j=t.n(h),f="/api/persons",m=function(){return j.a.get(f)},O=function(e){return j.a.post(f,e).then((function(e){return e.data}))},p=function(e){return j.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},v=function(e,n){return j.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},x=function(e){var n=e.message,t=e.className,a=void 0===t?"notification":t;return null==n?null:Object(c.jsxs)("div",{className:a,children:[" ",n," "]})},g=(t(39),function(){var e=Object(a.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)(""),u=Object(s.a)(o,2),h=u[0],j=u[1],f=Object(a.useState)(""),g=Object(s.a)(f,2),w=g[0],N=g[1],C=Object(a.useState)(""),P=Object(s.a)(C,2),S=P[0],k=P[1],y=Object(a.useState)(null),E=Object(s.a)(y,2),F=E[0],T=E[1],V=Object(a.useState)(null),J=Object(s.a)(V,2),L=J[0],A=J[1];Object(a.useEffect)((function(){m().then((function(e){return r(e.data)})).catch((function(e){return console.log("something went wrong app useEffect ",e)}))}),[]),Object(a.useEffect)((function(){setTimeout((function(){A(null),T(null)}),5e3)}),[F,L]);var B=t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Phonebook"}),F&&Object(c.jsx)(x,{message:F}),L&&Object(c.jsx)(x,{message:L,className:"error"}),Object(c.jsx)(b,{handleFilterValueChange:function(e){k(e.target.value)},filterValue:S}),Object(c.jsx)("h3",{children:"add a new contact"}),Object(c.jsx)(d,{handleNameChange:function(e){j(e.target.value)},handleNumberChange:function(e){N(e.target.value)},addName:function(e){e.preventDefault();var n=[],c={name:h.trim(),number:w.trim()};if(t.forEach((function(e){return n.push(e.name)})),""!==h)if(t.some((function(e){return e.name===h}))){var a=t.find((function(e){return e.name===h})),o=Object(i.a)(Object(i.a)({},a),{},{number:w}),u=o.id;window.confirm("".concat(h," has already been added to phonebook, update number?"))&&v(u,o).then((function(e){void 0!==e&&(r(t.map((function(n){return n.id!==u?n:e}))),T("The number of ".concat(h," has been updated!")))})).catch((function(e){console.log(e),A(e.response.data.error)}))}else O(c).then((function(e){r(t.concat(e)),T("Person ".concat(c.name," has been added to the Phonebook"))})).catch((function(e){A(e.response.data.error)})),j(""),N("")},newName:h,newNumber:w}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(l,{persons:B,deletePerson:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Are you sure you want to delete ".concat(n.name,"?"))&&p(e).then((function(){var c=t.filter((function(n){return n.id!==e}));r(c),T("Person ".concat(n.name," has been deleted from the Phonebook")),setTimeout((function(){T(null)}),5e3)})).catch((function(c){console.log(c),A("Person ".concat(n.name," has already been deleted from server")),setTimeout((function(){A(null)}),5e3),r(t.filter((function(n){return n.id!==e})))}))}})]})});u.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(g,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.5721f5e8.chunk.js.map